<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>U-14 Cricket Slot Registration</title>

  <style>
    body{
      font-family: Arial, system-ui;
      background:#f3f6f9;
      margin:0;
      padding:20px;
    }
    .container{
      max-width:900px;
      margin:auto;
    }
    .card{
      background:#fff;
      padding:18px;
      border-radius:10px;
      margin-bottom:20px;
    }
    .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:40px;
      margin-top:10px;
    }
    input,select{
      width:100%;
      padding:10px;
      border:1px solid #ccc;
      border-radius:6px;
      margin-top:4px;
    }
    button{
      padding:10px 16px;
      background:#0f7cfa;
      color:#fff;
      border:none;
      border-radius:6px;
      cursor:pointer;
      margin-top:14px;
    }
    #ticketCard{display:none}
    .ticket{
      border:2px dashed #0f7cfa;
      padding:16px;
      border-radius:10px;
      display:flex;
      gap:20px;
      align-items:center;
      margin-top:10px;
    }
    #qrcode img{
      border:1px solid #ccc;
      padding:4px;
      background:#fff;
    }
  </style>
</head>

<body>
<div class="container">

  <h2>U-14 Cricket Slot Registration</h2>

  <!-- FORM -->
  <div class="card">
    <form id="regForm">

      <div class="row">
        <div>
          <label>Player Name</label>
          <input id="playerName" required>
        </div>
        <div>
          <label>Age</label>
          <input id="age" type="number" min="6" max="13" required>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Guardian Name</label>
          <input id="guardian" required>
        </div>
        <div>
          <label>Phone</label>
          <input id="phone" required>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Day</label>
          <select id="day">
            <option>Day 1</option>
            <option>Day 2</option>
            <option>Day 3</option>
          </select>
        </div>
        <div>
          <label>Slot</label>
          <select id="slot">
            <option>8–9 AM</option>
            <option>9–10 AM</option>
            <option>10–11 AM</option>
            <option>11–12 PM</option>
            <option>1–2 PM</option>
            <option>2–3 PM</option>
            <option>3–4 PM</option>
            <option>4–5 PM</option>
          </select>
        </div>
      </div>

      <button type="submit">Book Slot</button>
    </form>
  </div>

  <!-- TICKET PREVIEW -->
  <div class="card" id="ticketCard">
    <h3>Your Ticket</h3>
    <div class="ticket">
      <div id="ticketDetails"></div>
      <div id="qrcode"></div>
    </div>
  </div>

</div>

<script>
document.getElementById('regForm').addEventListener('submit', function(e){
  e.preventDefault();

  const ticketId = 'TKT-' + Date.now();
  const player = playerName.value;
  const ageVal = age.value;
  const guardianVal = guardian.value;
  const phoneVal = phone.value;
  const dayVal = day.value;
  const slotVal = slot.value;

  document.getElementById('ticketCard').style.display = 'block';

  document.getElementById('ticketDetails').innerHTML = `
    <p><strong>Ticket ID:</strong> ${ticketId}</p>
    <p><strong>Player:</strong> ${player}</p>
    <p><strong>Age:</strong> ${ageVal}</p>
    <p><strong>Guardian:</strong> ${guardianVal}</p>
    <p><strong>Phone:</strong> ${phoneVal}</p>
    <p><strong>Day:</strong> ${dayVal}</p>
    <p><strong>Slot:</strong> ${slotVal}</p>
  `;

  /* ✅ CORRECT QR GENERATION (ENCODE FULL URL) */
const ticketURL =
  `https://deepthireddi.github.io/cricket-ticket/ticket.html` +
  `?ticketId=${ticketId}` +
  `&player=${player}` +
  `&age=${ageVal}` +
  `&guardian=${guardianVal}` +
  `&phone=${phoneVal}` +
  `&day=${dayVal}` +
  `&slot=${slotVal}`;

const qrURL =
  `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(ticketURL)}`;

  document.getElementById('qrcode').innerHTML =
    `<img src="${qrURL}" alt="QR Code">`;

  this.reset();
});
</script>

</body>
</html>
